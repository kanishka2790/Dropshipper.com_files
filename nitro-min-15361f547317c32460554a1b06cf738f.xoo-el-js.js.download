jQuery(document).ready(function(c){var o={"xoo-el-login-tgr":"login","xoo-el-reg-tgr":"register","xoo-el-lostpw-tgr":"lostpw","xoo-el-resetpw-tgr":"resetpw"};class t{constructor(o){this.$container=o;this.$tabs=o.find("ul.xoo-el-tabs").length?o.find("ul.xoo-el-tabs"):null;this.display=o.hasClass("xoo-el-form-inline")?"inline":"popup";if(this.$container.attr("data-active")){this.toggleForm(this.$container.attr("data-active"))}this.eventHandlers()}eventHandlers(){this.formTriggerEvent();this.$container.on("submit",".xoo-el-action-form",this.submitForm.bind(this))}formTriggerEvent(){var t=this;c.each(o,function(o,e){c(t.$container).on("click","."+o,function(o){o.preventDefault();o.stopImmediatePropagation();t.toggleForm(e)})})}toggleForm(o){this.$container.attr("data-active",o);var e=this.$container.find('.xoo-el-section[data-section="'+o+'"]'),t="xoo-el-active";if(e.length){this.$container.find(".xoo-el-section").removeClass(t);e.addClass(t);e.find(".xoo-el-notice").html("").hide();e.find(".xoo-el-action-form").show()}if(this.$tabs){this.$tabs.find("li").removeClass(t);if(this.$tabs.find('li[data-tab="'+o+'"]').length){this.$tabs.find('li[data-tab="'+o+'"]').addClass(t)}}c(document.body).trigger("xoo_el_form_toggled",[o,this])}submitForm(o){o.preventDefault();var e=c(o.currentTarget),t=e.find('button[type="submit"]'),i=e.parents(".xoo-el-section"),l=t.text(),n=i.find(".xoo-el-notice"),r=i.attr("data-section"),s=this;t.html(xoo_el_localize.html.spinner).addClass("xoo-el-processing");var a=e.serialize()+"&action=xoo_el_form_action"+"&display="+s.display;c.ajax({url:xoo_el_localize.adminurl,type:"POST",data:a,success:function(o){t.removeClass("xoo-el-processing").html(l);if(o.error===undefined){console.log(o);location.reload();return}if(o.notice){n.html(o.notice).show();if(s.display==="inline"){c("html, body").animate({scrollTop:n.offset().top-100},500)}}if(o.error===0){if(o.redirect){setTimeout(function(){window.location=o.redirect},xoo_el_localize.redirectDelay)}else{e.hide()}e.trigger("reset");if(r==="resetpw"){e.add(".xoo-el-resetpw-hnotice").remove()}}c(document.body).trigger("xoo_el_form_submitted",[o,e,s])}})}}class e{constructor(o){this.$popup=o;this.eventHandlers();this.initScrollbar()}eventHandlers(){this.$popup.on("click",".xoo-el-close, .xoo-el-modal",this.closeOnClick.bind(this));c(document.body).on("xoo_el_form_submitted",this.onFormSubmitSuccess.bind(this));this.$popup.on("click",".xoo-el-action-btn",this.setScrollBarOnSubmit.bind(this));c(window).on("hashchange load",this.openViaHash.bind(this));this.triggerPopupOnClick()}triggerPopupOnClick(){c.each(o,function(e,o){c(document.body).on("click","."+e,function(o){if(c(this).parents(".xoo-el-form-container").length)return true;o.preventDefault();o.stopImmediatePropagation();l.toggle("show");if(c(this).attr("data-redirect")){l.$popup.find('input[name="xoo_el_redirect"]').val(c(this).attr("data-redirect"))}l.$popup.find("."+e).trigger("click");return false})})}initScrollbar(){this.$scrollbar=Scrollbar.init(this.$popup.find(".xoo-el-srcont").get(0))}toggle(o){var e=this.$popup.add("body"),t="xoo-el-popup-active";if(o==="show"){e.addClass(t)}else if(o==="hide"){e.removeClass(t)}else{e.toggleClass(t)}c(document.body).trigger("xoo_el_popup_toggled",[o])}closeOnClick(o){var e=o.target.classList;if(e.contains("xoo-el-close")||e.contains("xoo-el-modal")){this.toggle("hide")}}setScrollbarPosition(o){this.$scrollbar.scrollTop=o||0}onFormSubmitSuccess(o,e,t,i){this.setScrollbarPosition()}setScrollBarOnSubmit(o){var e=c(o.currentTarget).closest("form").find("input:invalid");if(e.length===0)return;this.setScrollbarPosition(e.filter(":first").closest(".xoo-aff-group").position().top)}openViaHash(){var o=c(location).attr("hash");if(o==="#login"){this.toggle("show");this.$popup.find(".xoo-el-login-tgr").trigger("click")}else if(o==="#register"){this.toggle("show");this.$popup.find(".xoo-el-reg-tgr").trigger("click")}}}class i{constructor(o){this.$form=o}eventHandlers(){}}var l=null;if(c(".xoo-el-container").length){l=new e(c(".xoo-el-container"))}if(xoo_el_localize.autoOpenPopup==="yes"&&localStorage.getItem("xoo_el_popup_opened")!=="yes"){if(xoo_el_localize.autoOpenPopupOnce==="yes"){localStorage.setItem("xoo_el_popup_opened","yes")}setTimeout(function(){l.toggle("show")},xoo_el_localize.aoDelay)}c(".xoo-el-form-container").each(function(o,e){new t(c(e))});if(c("form.xoo-el-form-resetpw").length){if(c(".xoo-el-form-inline").length){c([document.documentElement,document.body]).animate({scrollTop:c(".xoo-el-form-inline").offset().top},500)}else{if(l){l.toggle("show")}}}if(c("body.woocommerce-checkout").length&&c(".xoo-el-form-inline").length&&c("a.showlogin").length){var n=c(".xoo-el-form-inline");n.hide();c(document.body).on("click","a.showlogin",function(){n.slideToggle();n.find(".xoo-el-login-tgr").trigger("click")})}});