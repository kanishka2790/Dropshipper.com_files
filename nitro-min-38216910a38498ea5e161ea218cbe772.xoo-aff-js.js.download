jQuery(document).ready(function(r){(function(){r(".xoo-aff-input-date").each(function(t,e){var a=r(e),s=a.data("date");a.datepicker(s)})})();var a=JSON.parse(xoo_aff_localize.states);var s=function(t){var e=this;e.$selectCountry=t;e.id=e.$selectCountry.attr("name");e.$form=e.$selectCountry.closest("form");e.$selectState=e.$form.find('.xoo-aff-states[data-country_field="'+e.id+'"]');e.$selectPhoneCode=e.$form.find('.xoo-aff-phone_code[data-country_field="'+e.id+'"]');e.states=e.$selectState.length?e.states():false;e.$selectCountry.on("change",{country:e},this.onChange);e.$selectCountry.trigger("change")};s.prototype.onChange=function(t){var e=t.data.country;if(e.states){e.states.updateStateField(t)}if(e.$selectPhoneCode.length){e.updatePhoneCodeField()}};s.prototype.updatePhoneCodeField=function(){var t=this,e=t.$selectPhoneCode.find('option[data-country_code="'+t.$selectCountry.val()+'"]');if(e){e.prop("selected","selected")}t.$selectPhoneCode.trigger("change")};s.prototype.states=function(){var e=this,s=e.$selectState,o=e.$selectState.data("default_state");var n={init:function(){n.$statePlaceholder=s.find('option[value="placeholder"]');n.$selectStateCont=s.parent();n.$inputState=n.createStateInput()},getStates:function(){var t=a[e.$selectCountry.val()];return t===undefined||t.length===0?null:t},createStateInput:function(){return r('<input type="text" />').prop("name",s.attr("name")).prop("placeholder",n.$statePlaceholder.html()).addClass(s.attr("class"))},updateStateField:function(t){var e=t.data.country;s.find("option").not(n.$statePlaceholder).remove();if(e.$selectCountry.val()){var a=n.getStates();if(!a){n.$selectStateCont.find(".select2-container").remove();n.$selectStateCont.append(n.$inputState)}else{n.$inputState.remove();n.$selectStateCont.append(s);r.each(a,function(t,e){s.append('<option value="'+t+'">'+e+"</option>")});if(o){n.$selectStateCont.find("option[value="+o+"]").prop("selected","selected")}s.select2()}}}};n.init();return n};r.each(r("select.xoo-aff-country"),function(t,e){new s(r(e))});var o={init:function(){r(document.body).on("keyup change",'input.xoo-aff-password[check_strength="yes"]',this.strengthMeter)},strengthMeter:function(){var t=r(this).parents(".xoo-aff-group"),e=t.parents("form");submit=e.length?r('button[type="submit"]',e):false,field=r(this),strength=1,passStrength=r(this).attr("strength_pass").length?r(this).attr("strength_pass"):xoo_aff_localize.password_strength.min_password_strength,fieldValue=field.val();o.includeMeter(t,field);strength=o.checkPasswordStrength(t,field,passStrength);if(submit&&fieldValue.length>0&&strength<passStrength&&-1!==strength){submit.attr("disabled","disabled").addClass("disabled")}else{submit.removeAttr("disabled","disabled").removeClass("disabled")}},includeMeter:function(t,e){var a=t.find(".xoo-aff-password-strength");if(""===e.val()){a.hide();r(document.body).trigger("xoo-aff-password-strength-hide")}else if(0===a.length){t.append('<div class="xoo-aff-password-strength" aria-live="polite"></div>');r(document.body).trigger("xoo-aff-password-strength-added")}else{a.show();r(document.body).trigger("xoo-aff-password-strength-show")}},checkPasswordStrength:function(t,e,a){var s=t.find(".xoo-aff-password-strength"),o=t.find(".xoo-aff-password-hint"),n='<small class="xoo-aff-password-hint">'+xoo_aff_localize.password_strength.i18n_password_hint+"</small>",r=wp.passwordStrength.meter(e.val(),wp.passwordStrength.userInputBlacklist()),d="";s.removeClass("short bad good strong");o.remove();if(s.is(":hidden")){return r}if(r<a){d=" - "+xoo_aff_localize.password_strength.i18n_password_error}switch(r){case 0:s.addClass("short").html(pwsL10n["short"]+d);s.after(n);break;case 1:s.addClass("bad").html(pwsL10n.bad+d);s.after(n);break;case 2:s.addClass("bad").html(pwsL10n.bad+d);s.after(n);break;case 3:s.addClass("good").html(pwsL10n.good+d);break;case 4:s.addClass("strong").html(pwsL10n.strong+d);break;case 5:s.addClass("short").html(pwsL10n.mismatch);break}return r}};o.init();if(r.fn.select2){r("select.xoo-aff-select_list , select.xoo-aff-country").each(function(t,e){r(e).select2()})}if(r.fn.select2){function n(t){if(!t.id){return t.text}var e=t.element.getAttribute("data-country_code");e=e?e.toLowerCase():e;var a=r('<div class="xoo-aff-flag-cont"><span class="flag '+e+'"></span>'+"<span>"+t.text+"</span></div>");return a}r("select.xoo-aff-phone_code").each(function(t,e){r(e).select2({templateResult:n,templateSelection:n})})}});